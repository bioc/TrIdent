---
title: TrIdent Tutorial
layout: template
filename: Tutorial.md
--- 


### Description:

TrIdent automates the transductomics data analysis process. Transductomics is a method developed by Dr. Manuel Kleiner to detect ongoing transduction in DNA sequencing reads. The method relies on mapping reads from a virome (VLP-fraction) of a sample to contigs assembled from the metagenome (whole-community) of the same sample. Reads from bacterial DNA carried by viruses or VLPs (Viral-Like Particles) will map back to their bacterial contigs of origin creating read coverage patterns indicative of active transduction. Read 'Transductomics: sequencing-based detection and analysis of transduced DNA in pure cultures and microbial communities' Kleiner et al. (2020) for more information.

**Reference:** Kleiner, M., Bushnell, B., Sanderson, K.E. et al. Transductomics: sequencing-based detection and analysis of transduced DNA in pure cultures and microbial communities. Microbiome 8, 158 (2020). <https://doi.org/10.1186/s40168-020-00935-5>

------------------------------------------------------------------------

# TrIdent tutorial:

**TrIdent**- **Tr**ansduction **Ident**ification

TrIdent consists of three main functions to automatically detect, classify, and characterize potential transducing events:

-   `TrIdent_Classifier()`: Classifies contigs as 'Prophage-like', 'Gen/Lat/GTA', 'HighVLPWCReadCov', and None
-   `PlotTrIdentPatternMatches()`: Plots results of TrIdent_Classifier
-   `SpecializedTransduction_ID()`: Detects potential specialized transduction on contigs classified as Prophage-like

Running TrIdent in default mode is the easiest, but users can learn how to use various arguments to modify TrIdent's results in this tutorial.

##### Input Data:

The datasets used in this tutorial- 'VLPFraction_sampledata' and 'WholeCommunity_sampledata'- were generated from a conventional mouse fecal metagenome. The homogenized feces represents the whole-community fraction. The VLP-fraction of the fecal sample was separated and purified via CsCl density gradient ultracentrifugation. Both the whole-community and VLP-fraction were shotgun sequenced after which the metagenome was assembled from the whole-community reads. The whole-community and VLP-fraction reads were mapped to the metagenome contigs and two pileup files were generated to summarize the respective read coverages across each contig. A description of this process is detailed in Kleiner et al. (2020). A subset of 10 contigs were selected for the sample dataset used in this tutorial.

The two pileup files were generated using BBMap's `pileup.sh` with a binsize of 100. **We highly recommend using the commands below (with your own sorted .bam files) to generate the pileup files needed for TrIdent:**

```{bash, eval=FALSE}
pileup.sh in=VLPFraction_ReadMappingSorted.bam out=VLPFraction.pileupcovstats bincov=VLPFraction.bincov100 binsize=100 stdev=t

pileup.sh in=WholeCommunity_ReadMappingSorted.bam out=WholeCommunity.pileupcovstats bincov=WholeCommunity.bincov100 binsize=100 stdev=t
```

##### In R...

Load the package into your library. If you don't already have TrIdent, you can find installation instructions here (Need Link)

```{r, eval=FALSE}
library(TrIdent)
```

Import your pileup files:

The 'VLPFraction.bincov100' and 'WholeCommunity.bincov100' .txt files generated by BBMap's `pileup.sh` can be used directly for input to TrIdent. **The windowsize/binsize used to generate these files must be 100**. Here is what the raw pileup file should look like however the information in the first column may be formatted differently depending on your contig accession format:
